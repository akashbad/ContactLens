.container-fluid.thick-shadow#engage
  .row-fluid.tags-row
    .tags-container.span4
      %input.tags-input{:type=>"text", :placeholder=>"Tags", autocomplete:"off", autofocus: "autofocus"}
    .span8
      %ul.nav.nav-pills.tags
        :plain
          <li class='active'><a>Reporter<button type='button' data-dismiss='alert' class='close'><i class="icon-remove icon-white"></i></button></a></li>
  .row-fluid#info-container
    .span2#prof-pic-container
      %img#prof-pic{src: @person["photos"].first["url"]}
    .span3
      %p
        %h3
          = @person["contactInfo"]["fullName"]
        %h4
          = @contact.email 
    .span3#social-info
      / %span.badge.badge-info
      /   340
      / Twitter Followers
      / %br
      / %span.badge
      /   1889
      / Facebook Friends
      / %br
      / %span.badge.badge-inverse
      /   45
      / LinkedIn Connections
    .span2
      %p
        %h4 Location 
        Salt Lake City
    .span2#location-container
      :plain
        <img src="http://maps.googleapis.com/maps/api/staticmap?center=40.75,-111.8833&zoom=11&size=128x128&sensor=false">
  .row-fluid.interaction-container.thin-shadow
    .half-box
      .blue-bar
      %ul.top-bar.nav.nav-tabs#tabs
        %li.active
          %a.interaction-icon{href:"#calendar"}
            = image_tag "calendar.png", class: "history-icon"
        %li
          %a.interaction-icon{href:"#facebook"}
            = image_tag "facebook.png", class: "history-icon"
        %li
          %a.interaction-icon{href:"#gmail"}
            = image_tag "gmail.png", class: "history-icon"
        %li
          %a.interaction-icon{href:"#linkedin"}
            = image_tag "linkedin.png", class: "history-icon"
        %li
          %a.interaction-icon{href:"#phone"}
            = image_tag "phone.png", class: "history-icon"
        %li
          %a.interaction-icon{href:"#twitter"}
            = image_tag "twitter.png", class: "history-icon"
      .shadow-box
        .tab-content#interaction
          #alert-container{style:"display:none;"}
            .alert.alert-success
              %a.close{"data-dismiss" =>"alert"}
                x
              %span#alert-message
                Success!
          #alert-container-error{style:"display:none;"}
            .alert.alert-error
              %a.close{"data-dismiss" =>"alert"}
                x
              %span#alert-error
                Error
          .tab-pane.active#calendar
            .row
              .blue-bar.calendar-bar
          .tab-pane#facebook
            .row
              .blue-bar.facebook-bar
          .tab-pane#gmail
          .tab-pane#linkedin
            .row
              .blue-bar.linkedin-bar
          .tab-pane#phone
            .row
              .blue-bar.phone-bar
          .tab-pane#twitter
      
    .half-box
      .blue-bar
      .top-bar
        %h3.history-title
          Contact History
      .history#history-list

%script#tag-template{type:"text/template"}
  %li.active
    %a<
      {{tag}} 
      %button.close{type:"button", data:{dismiss: "alert"}}>
        %i.icon-remove.icon-white

%script#history-item-template{type:"text/template"}
  %a{href: "\#{{type}}/history{{id}}"}
    =image_tag "{{icon}}", class: "history-icon"
    {{text}}
  {[if(!outgoing) {]}
  =image_tag "left_arrow.png", class: "outgoing-icon"
  {[} else {]}
  =image_tag "right_arrow.png", class: "outgoing-icon"
  {[}]}    

%script#twitter-oauth-template{type:"text/template"}
  .row
    .blue-bar.twitter-bar
    .twitter-signin-background
      .twitter-signin
        %h3 Connect your Twitter Account
        %h5 Engage with your contacts in more ways by signing in with Twitter!
        %a.twitter-signin-button{href:"/auth/twitter"}


%script#twitter-add-template{type:"text/template"}
  .row
    .blue-bar.twitter-bar
    .twitter-signin-background
      .twitter-signin
        %h3 Oops! We couldn't find that contact on twitter...
        %h5 If you know their handle add them here:
        %input.twitter-new-contact#add-twitter{type:"text", placeholder: "@someone"}
        %button.btn.twitter-new-contact-submit#add-twitter-button
          Add

%script#twitter-template{type:"text/template"}
  .row
    .blue-bar.twitter-bar
    .engage-header
      %h4
        {[if(typeof(interactionHistory) != 'undefined') {]}
        Reply to
        {[} else {]}
        Tweet to
        {[ } ]}
        %a{href:"http://twitter.com/@{{contact_handle}}"}
          @{{contact_handle}}
  {[if(typeof(interactionHistory) != 'undefined') {]}
  .row
    .offset2.span8.previous-tweet
      {{interactionHistory.text}}  
  .row.retweet-box
    .offset2.span5.clearfix
      =image_tag "https://api.twitter.com/1/users/profile_image?screen_name=@{{contact_handle}}&size=normal", class: "small-twitter-picture"
      .twitter-full-name
        {{contact_name}}
      .twitter-screen-name
        %a{href:"http://twitter.com/@{{contact_handle}}"}
          @{{contact_handle}}
    %button.btn.btn-success.span3#send-retweet
      Retweet 
  {[}]}
  .row.tweet-area
    %textarea.offset2.span8#twitter-input{rows:"5"}
      @{{contact_handle}}
  .row
    .offset2.span5.clearfix
      =image_tag "https://api.twitter.com/1/users/profile_image?screen_name=@{{user_handle}}&size=normal", class: "small-twitter-picture"
      .twitter-full-name
        {{user_name}}
        .twitter-screen-name
          %a{href:"http://twitter.com/@{{user_handle}}"}
            @{{user_handle}}
    .span1#char-remain
    %button.btn.btn-info.span2#send-tweet
      {[if(typeof(interactionHistory) != 'undefined') {]}
      Reply
      {[} else {]}
      Tweet
      {[ } ]}

%script#gmail-template{type:"text/template"}
  .row
    .blue-bar.gmail-bar
    .engage-header
      %h4
        {[if(typeof(interactionHistory) != 'undefined') {]}
        Mail from
        {[} else {]}
        Email
        {[ } ]}
        %a{href:"mailto:{{contact_email}}"}
          {{contact_email}}
  {[if(typeof(interactionHistory) != 'undefined') {]}
  #gmail-email-box
    .row
      .offset1.span10
        %h5
          {{interactionHistory.text}}
        .previous-email
          {{interactionHistory.deep_text}}
    .row
      %button.btn.btn-danger.offset9.span2#start-email-reply
        Reply
  {[}]}
  #gmail-reply-box
    .row
      .input-prepend.span10.offset1
        %span.add-on
          To
        %input#gmail-to.span10{type: "text", value: "{{contact_email}}", disabled: "disabled"}
    .row
      .input-prepend.span10.offset1
        %span.add-on
          Cc 
        %input#gmail-cc.span10{type: "text"}
    .row
      .input-prepend.span10.offset1
        %span.add-on
          From
        %input#gmail-from.span10{type: "text", value: "{{user_email}}", disabled: "disabled"}
    .row
      .input-prepend.span10.offset1
        %span.add-on
          Subject
        %input#gmail-subject.span10{type: "text"}
    .row
      %textarea.offset1.span10#gmail-input{rows: "8"} 
    .row
      {[if(typeof(interactionHistory) != 'undefined') {]}
      %button.btn.btn-warning.offset1.span4#back-email
        Back to Message
      %button.btn.btn-danger.offset4.span2#send-email
        Reply
      {[} else {]}
      %button.btn.btn-danger.offset9.span2#send-email
        Send
      {[}]}

